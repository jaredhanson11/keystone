image:
  repository: jaredhanson11/summn-api-prototype
  tag: 0.1.0

dbConnection:
  shouldConnect: true
  prefix: "postgresql://"
  passwordSecret:
    secretName: postgres-secrets
    keyName: summn-rw-user-password
  user: summn-rw-user
  port: 25060
  host: summn-production-database-do-user-7025508-0.a.db.ondigitalocean.com
  name: summn?sslmode=require

existingSecret: summn-api-prototype-secrets
secret:
  AYLIEN_NEWS_API_ID: ""
  AYLIEN_NEWS_API_KEY: ""
  SECRET_KEY: ""
  RMQ_PASSWORD: ""
config:
  RMQ_USER: "keystone-user"
  RMQ_PORT: 5672
  RMQ_HOST: rabbitmq
  # ALEXA_SOURCE_RANKING_MAX is deprecated and doesn't affect anything
  ALEXA_SOURCE_RANKING_MAX: "200"
  # SUMMN_STORY_COUNT not currently used to configure anything (look in code)
  SUMMN_STORY_COUNT: "10"

ingress:
  subdomain: "api"

config.py: |-
  import os
  # SQLALCHEMY
  SQLALCHEMY_DATABASE_URI = os.environ.get('SQLALCHEMY_DATABASE_URI')
  # Stories configuration
  ALEXA_SOURCE_RANKING_MAX = int(os.environ.get('ALEXA_SOURCE_RANKING_MAX'))
  SUMMN_STORY_COUNT = int(os.environ.get('SUMMN_STORY_COUNT'))
  # Aylien Config
  AYLIEN_NEWS_API_ID = os.environ.get('AYLIEN_NEWS_API_ID')
  AYLIEN_NEWS_API_KEY = os.environ.get('AYLIEN_NEWS_API_KEY')
  # JWT Auth
  SECRET_KEY = os.environ.get('SECRET_KEY')
  JWT_LIFESPAN = os.environ.get('JWT_LIFESPAN', -1)
  JWT_FRESHSPAN = os.environ.get('JWT_FRESHSPAN', 5)
  # RabbitMQ connection
  RMQ_USER = os.environ.get('RMQ_USER')
  RMQ_PASSWORD = os.environ.get('RMQ_PASSWORD')
  RMQ_HOST = os.environ.get('RMQ_HOST')
  RMQ_PORT = os.environ.get('RMQ_PORT')
  # Password reset
  if os.environ.get('RESET_TOKEN_TTL_MINUTES'):
      RESET_TOKEN_TTL_MINUTES=int(os.environ.get('RESET_TOKEN_TTL_MINUTES'))
