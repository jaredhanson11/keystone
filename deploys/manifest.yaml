# This manifest maps deployment payload -> stacks to deploy
#
## Deploys Structure ##
# deploys/
#   manifest.yaml
#   <namespace>/
#     <app>.yml # stack = _default
#     <app>.<stack>.yml
#
# Manifest Entry #
# <payload.deploy>:
#   - name: str # used to find
#     chartName: str # name of chart in helm repo (i.e stable/postgres)
#     namespace: str # name of k8s namespace (and values file directory)
#     stacks: list # if empty deploy all stacks, else deploy only stacks defined here
#
# NO YAML ANCHORS ALLOWED -> https://github.com/mikefarah/yq/issues/339

endergy-master: []

# endergy-tools
py-repo:
  - name: "py-repo"
    chartName: "endergy/py-repo"
    namespace: "endergy-tools"
    stacks: []

helm-repo:
  - name: "helm-repo"
    chartName: "endergy/helm-repo"
    namespace: "endergy-tools"
    stacks: []

# common services
db-migrations:
  - name: "db-migrations"
    chartName: "endergy/db-migrations"
    namespace: "common"
    stacks: []

postgresql:
  # Installed with:
  #   --set postgresqlPassword=***
  - name: "postgresql"
    chartName: "stable/postgresql"
    namespace: "common"
    stacks: []

kafka:
  # Installed with:
  #   --set auth.brokerPassword=***
  #   --set auth.interBrokerPassword=***
  #   --set auth.zookeeperPassword=***
  - name: "kafka"
    chartName: "bitnami/kafka"
    namespace: "common"
    stacks: []

minio:
  # Installed with:
  #   --set accessKey=***
  #   --set secretKey=***
  - name: "minio"
    chartName: "stable/minio"
    namespace: "common"
    stacks: []

# apps
landing-page:
  - name: "landing-page"
    chartName: "endergy/landing-page"
    namespace: "development"
    stacks: []
